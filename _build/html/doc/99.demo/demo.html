

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Demo &mdash; gramman 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="gramman 0.1 documentation" href="../../index.html"/>
        <link rel="prev" title="Watershed 알고리즘을 이용한 이미지 분할" href="../27.imageWaterShed/imageWaterShed.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> gramman
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01.imageStart/imageStart.html">이미지 다루기</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.videoStart/videoStart.html">영상 다루기</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.drawShape/drawShape.html">도형 그리기</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.drawWithMouse/drawWithMouse.html">Mouse로 그리기</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.trackBar/trackBar.html">Trackbar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.operation/operation.html">Basic Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07.imageArithmetic/imageArithmetic.html">이미지 연산</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08.imageProcessing/imageProcessing.html">이미지 Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09.imageThresholding/imageThresholding.html">이미지 임계처리</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10.imageTransformation/imageTransformation.html">이미지의 기하학적 변형</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11.imageSmoothing/imageSmoothing.html">Image Smoothing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12.imageMorphological/imageMorphological.html">Morphological Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13.imageGradient/imageGradient.html">Image Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14.imagePyramid/imagePyramid.html">Image Pyramids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15.imageContours/imageContours.html">Image Contours</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16.imageContourFeature/imageContourFeature.html">Contour Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17.imageContourProperty/imageContourProperty.html">Contour Property</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18.imageContourHierarchy/imageContourHierarchy.html">Contours Hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19.imageHistograms/imageHistograms.html">히스토그램</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20.imageHistogramEqualization/imageHistogramEqualization.html">히스토그램 균일화</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21.image2DHistogram/image2DHistogram.html">2D Histogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23.imageFourierTransform/imageFourierTransform.html">푸리에 변환</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24.imageTemplateMatch/imageTemplateMatch.html">템플릿 매칭</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25.imageHoughLineTransform/imageHoughLineTransform.html">허프 변환</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26.imageHoughCircleTransform/imageHoughCircleTransform.html">Hough Circle Transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27.imageWaterShed/imageWaterShed.html">Watershed 알고리즘을 이용한 이미지 분할</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Demo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">사전 준비 작업</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Demo소스 다운로드</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">소스 수정</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">아두이노</a></li>
<li class="toctree-l3"><a class="reference internal" href="#computer">Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raspberry-pi">Raspberry Pi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">테스트</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#computer-arduino">Computer - Arduino</a></li>
<li class="toctree-l3"><a class="reference internal" href="#computer-raspberry-pi">Computer - Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">gramman</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Demo</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/doc/99.demo/demo.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="demo">
<h1>Demo<a class="headerlink" href="#demo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>사전 준비 작업<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Demo를 위해서는 아래 프로그램이 설치가 되어 있어야 합니다.</p>
<blockquote>
<div><ul class="simple">
<li>Python 2.7.X 버전</li>
<li>Open CV 2.4.X 버전</li>
<li>Python Library : numpy, Pygame. piSerial</li>
</ul>
</div></blockquote>
<p>또한 Raspberry Pi에 Pi Camera와 거리 측정을 위한 ultrasonic Sensor가 연결되어 있어야 합니다.</p>
</div>
<div class="section" id="id2">
<h2>Demo소스 다운로드<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Demo에 관련 소스는 <a class="reference external" href="https://github.com/hamuchiwa/AutoRCCar">Github</a> 에서 확인할 수 있습니다.</p>
<p>git이 설치가 되어 있으면 terminal에서 아래와 같이 입력합니다.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">hamuchiwa</span><span class="o">/</span><span class="n">AutoRCCar</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>git이 없으면 아래 &#8216;Clone or download&#8217;버튼을 눌러 zip 파일을 다운로드 받은 후 압축을 해제합니다.</p>
<div class="figure align-center">
<img alt="../../_images/image015.jpg" src="../../_images/image015.jpg" />
</div>
<p>동일한 작업을 Computer와 Raspberry Pi에서 수행을 하여 소스를 다운 받습니다.</p>
</div>
<div class="section" id="id3">
<h2>소스 수정<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>다운 받은 소스에서 아래 부분을 Demo환경에 맞게 수정해야 합니다.</p>
<div class="section" id="id4">
<h3>아두이노<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>arduino/rc_keyboard_control.ino</li>
</ul>
</div></blockquote>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="c1">// 아두이노와 RC Car와 연결된 Pin Number.</span>
<span class="c1">// 아래 번호를 수정하거나, 아래 Pin에 맞게 RC Car와 연결.</span>
<span class="c1">// 아래는 demo에 맞게 변경된 상태임.</span>
<span class="kt">int</span> <span class="n">right_pin</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">left_pin</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">forward_pin</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">reverse_pin</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
</pre></div>
</div>
<p>수정을 한 후에 아두이노 IDE를 통해서 컴파일 후 배포를 합니다.</p>
</div>
<div class="section" id="computer">
<h3>Computer<a class="headerlink" href="#computer" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>computer/xxxx.py</li>
</ul>
</div></blockquote>
<p>computer폴더 밑에 py소스들을 열어 보면 아래와 같은 부분이 있는 소스가 있습니다.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;192.168.1.100&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">ser</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="s1">&#39;/dev/tty.usbmodem1421&#39;</span><span class="p">,</span> <span class="mi">115200</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>첫번째 라인은 Raspberry pI와 통신을 하기 위한 Socket IP입니다. PC의 IP로 변경을 합니다.
두번째 라인은 아두이노와 통신하기 위한 Serial Port입니다. 어떤 Serial Port를 사용하는지 확인은 아두이노 IDE에서 확인이 가능합니다.</p>
<div class="figure align-center">
<img alt="../../_images/image031.jpg" src="../../_images/image031.jpg" />
</div>
</div>
<div class="section" id="raspberry-pi">
<h3>Raspberry Pi<a class="headerlink" href="#raspberry-pi" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>raspberryPi/xxxxxx.py</li>
</ul>
</div></blockquote>
<p>라즈베리파이 관련해서는 이미지를 전송하는 Client(<code class="docutils literal"><span class="pre">stream_clinet.py</span></code>)와 거리 측정을 위한 Client(<code class="docutils literal"><span class="pre">ultrasoni_clinet.py</span></code>)가 있습니다. 이 2개의 소스에서도 socket관련 부분을 컴퓨터의 IP로 변경을 해주면 됩니다.</p>
</div>
</div>
<div class="section" id="id5">
<h2>테스트<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>이제 각 연결이 제대로 되었는지 테스트를 해보겠습니다.</p>
<div class="section" id="computer-arduino">
<h3>Computer - Arduino<a class="headerlink" href="#computer-arduino" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>위 테스트틀 위해서 우선 아두이노에 LED를 연결하여 키보드를 눌렀을 때 정상적으로 아두이노로 명령이 전달이 되는지 확인해보겠습니다.</p>
<p>우선 아두이노에 LED와 저항을 연결해야 합니다.
아래는 Fritzing  툴을 이용하여 회로도를 그렸습니다.</p>
</div></blockquote>
<div class="figure align-center">
<img alt="../../_images/image022.jpg" src="../../_images/image022.jpg" />
</div>
<p>이제 아두이노와 PC를 USB 포트로 연결을 하고, 키보드로 상하좌우 버튼을 누릅니다.그르면 상단부터 순서대로 LED가 깜빡거리를 것을 확인할 수 있습니다.
테스트 결과는  <a class="reference external" href="https://www.youtube.com/watch?v=6afzjPchmwY">여기</a> 에서 확인할 수 있습니다.</p>
</div>
<div class="section" id="computer-raspberry-pi">
<h3>Computer - Raspberry Pi<a class="headerlink" href="#computer-raspberry-pi" title="Permalink to this headline">¶</a></h3>
<p>Computer와 Raspberry Pi에서 확인할 사항은 이미지 전송과 거리측정 센서 연결 상태입니다.</p>
<p>우선 Computer에서 rc_driver.py를 실행합니다.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="n">rc_driver</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>그러면 Computer는 서버가 되어 Clinet의 요청을 기다리고 있습니다.</p>
<p>다음으로 Raspberry Pi에 접속을 하여 2개의 터미널을 수행시키고 아래와 같이 입력합니다.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="n">stream_clinet</span><span class="o">.</span><span class="n">py</span> <span class="o">//</span> <span class="n">이미지</span> <span class="n">전송</span> <span class="n">Clinet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sudo</span> <span class="n">python</span> <span class="n">ultrasonici_cinet</span><span class="o">.</span><span class="n">py</span> <span class="o">//</span> <span class="n">거리</span> <span class="n">측정</span> <span class="n">Data전송</span> <span class="n">Client</span>
</pre></div>
</div>
<p>그러면 Computer에 카메라의 이미지가 전송이 되고, Computer의 Terminal에는 ultrasonic Sensor가 측정한 거리가 Cm단위로 보여지게 됩니다.</p>
<p>위와 같이 테스트가 완료가 되면 시스템 Setting은 완료가 된 상태입니다.</p>
<p>다음은 이제 Open CV의 Machine Learning기능을 이용하여 학습을 시켜 보도록 하겠습니다.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../27.imageWaterShed/imageWaterShed.html" class="btn btn-neutral" title="Watershed 알고리즘을 이용한 이미지 분할" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, gramman.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>